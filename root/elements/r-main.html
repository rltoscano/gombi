<link rel="import" href="../bower_components/core-header-panel/core-header-panel.html">
<link rel="import" href="../bower_components/core-pages/core-pages.html">
<link rel="import" href="../bower_components/core-toolbar/core-toolbar.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="r-about.html">
<link rel="import" href="r-contributions.html">
<link rel="import" href="r-model.html">
<link rel="import" href="r-showcase.html">

<polymer-element name="r-main" attributes="page" vertical layout flex>
  <template>
    <r-model id="model"></r-model>
    
    <style>
      core-toolbar {
        background-color: {{$.model.projects[$.model.mutable.project].highlight}};
        color: {{$.model.projects[$.model.mutable.project].titlefont == 'light' ? 'white' : 'black'}};
      }
    </style>

    <core-toolbar class="animate {{ {'medium-tall': isAtTop && $.model.mutable.project == null} | tokenList }}">
      <div class="top" hidden?="{{$.model.mutable.project || !isAtTop}}">Robert Toscano</div>
      <paper-tabs flex selected="{{$.model.mutable.page}}"
                  class="bottom"
                  hidden?="{{$.model.mutable.project}}">
        <paper-tab name="showcase">Showcase</paper-tab>
        <paper-tab name="contributions">Contributions</paper-tab>
        <paper-tab name="about">About</paper-tab>
      </paper-tabs>
      <paper-icon-button icon="arrow-back"
                         on-tap="{{onBack}}"
                         hidden?="{{!$.model.mutable.project}}"></paper-icon-button>
      <div hidden?="{{!$.model.mutable.project}}">{{$.model.projects[$.model.mutable.project].title}}</div>
    </core-toolbar>

    <core-pages selected="{{$.model.mutable.page}}" flex>
      <r-showcase id="showcase" name="showcase" flex></r-showcase>
      <r-contributions name="contributions" flex></r-contributions>
      <r-about name="about" flex></r-about>
    </core-pages>

  </template>
  
  <script>
    Polymer('r-main', {
      ready: function() {
        this.isAtTop = true;
      },
      onBack: function() {
        this.$.model.mutable.page = 'showcase';
        this.$.model.mutable.project = null;
      },
      onScroll: function(e) {
        this.isAtTop = (e.detail.target.scrollTop == 0)
      }
    });
  </script>
</polymer-element>