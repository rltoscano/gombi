<link rel="import" href="../bower_components/core-animated-pages/core-animated-pages.html">
<link rel="import" href="../../bower_components/core-header-panel/core-header-panel.html">
<link rel="import" href="../bower_components/core-pages/core-pages.html">
<link rel="import" href="../bower_components/core-selector/core-selector.html">
<link rel="import" href="../bower_components/core-toolbar/core-toolbar.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="projects/r-flashbrain.html">
<link rel="import" href="projects/r-giterdone.html">
<link rel="import" href="projects/r-haga.html">
<link rel="import" href="projects/r-straph.html">
<link rel="import" href="projects/r-tcp.html">
<link rel="import" href="projects/r-ubislideshow.html">
<link rel="import" href="r-model.html">
<link rel="import" href="r-project-card.html">
<link rel="import" href="r-screenshot.html">

<polymer-element name="r-showcase" vertical layout>
  <template>
    <r-model id="model"></r-model>

    <style>
      :host {
        background-color: #f9f9f9;
      }
      r-project-card {
        margin: 32px;
      }
    </style>

    <core-animated-pages vertical layout flex
                         transitions="hero-transition cross-fade"
                         togglePage
                         selected="{{$.model.mutable.project ? 'projectDetail' : 'projectList'}}">
      <section name="projectList">
        <core-header-panel mode="waterfall" fit>
          <core-selector id="cards" selected="{{$.model.mutable.project}}"
                         horizontal layout wrap center-justified>
            <template repeat="{{name in projects}}">
              <r-project-card name="{{name}}"
                              projectTitle="{{$.model.projects[name].title}}"
                              imgname="{{$.model.projects[name].img}}"
                              highlight="{{$.model.projects[name].highlight}}"
                              titlefont="{{$.model.projects[name].titlefont}}"
                              padding="{{$.model.projects[name].padding}}"
                              on-tap="{{onTapProject}}"
                              hero?="{{$.cards.selected == name || lastProject == name}}">
                {{$.model.projects[name].desc}}
              </r-project-card>
            </template>
          </core-selector>
        </core-header-panel>
      </section>

      <section name="projectDetail" vertical layout>
        <div flex hero hero-id="p" vertical layout>
          <core-pages selected="{{$.model.mutable.project}}" flex vertical layout>
            <core-header-panel mode="waterfall" fit mode="waterfall" name="flashbrain">
              <r-flashbrain vertical layout start></r-flashbrain>
            </core-header-panel>
            <core-header-panel mode="waterfall" fit name="door" flex></core-header-panel>
            <core-header-panel mode="waterfall" fit name="harbinger" flex></core-header-panel>
            <core-header-panel mode="waterfall" fit name="grhungary" flex></core-header-panel>
            <core-header-panel mode="waterfall" fit name="straph" flex>
              <r-straph vertical layout start></r-straph>
            </core-header-panel>
            <core-header-panel mode="waterfall" fit name="photoweb" flex></core-header-panel>
            <core-header-panel mode="waterfall" fit name="phrygian" flex></core-header-panel>
            <core-header-panel mode="waterfall" fit name="haga" flex>
              <r-haga vertical layout start></r-haga>
            </core-header-panel>
            <core-header-panel mode="waterfall" fit name="tcp" flex>
              <r-tcp vertical layout start></r-tcp>
            </core-header-panel>
            <core-header-panel mode="waterfall" fit name="huggable" flex></core-header-panel>
            <core-header-panel mode="waterfall" fit name="ubislideshow" flex>
              <r-ubislideshow vertical layout start></r-ubislideshow>
            </core-header-panel>
            <core-header-panel mode="waterfall" fit name="giterdone" flex>
              <r-giterdone vertical layout start></r-giterdone>
            </core-header-panel>
          </core-pages>
        </div>
      </section>

    </core-animated-pages>
  </template>
  
  <script>
    Polymer('r-showcase', {
      observe: {
        '$.model.mutable.project': 'onProjectChanged'
      },
      ready: function() {
        this.projects = Object.keys(this.$.model.projects);
      },
      onTapProject: function(e) {
        this.$.model.mutable.project = e.target.name;
        this.fire('project-selected', e.target);
      },
      onProjectChanged: function(oldValue, newValue) {
        if (newValue == null && oldValue != null) {
          this.lastProject = oldValue;
        } else {
          this.lastProject = null;
        }
      }
    });
  </script>
</polymer-element>